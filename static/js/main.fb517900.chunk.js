(this.webpackJsonppdf_viewer_app=this.webpackJsonppdf_viewer_app||[]).push([[0],{245:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=(a(245),a(15)),o=a(14),l=a(54),d=a.n(l),u=((new Date).getTime(),function(e,t){var a=function(e){return 610.78*Math.pow(Math.E,e/(e+238.3)*17.2694)}(e)*(1-t/100)/1e3;return Math.round(100*a)/100}),j=function(e,t,a){return(e-t)/(a-t)},b=a.p+"static/media/2021_week19_climate_data.513ad7be.csv",m=a(312),f=a(325),O=a(326),p=a(315),h=a(322),g=a(3),y=Object(m.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(6)},elementPadding:{padding:e.spacing(6)}}}));function x(e){var t=e.dataSetSelector,a=e.sensorChangeHandler,n=y(),c=r.a.useState(t[0].value),s=Object(i.a)(c,2),o=s[0],l=s[1];return r.a.useEffect((function(){a(o)}),[a,o]),Object(g.jsx)("div",{className:n.selectEmpty,children:Object(g.jsxs)(p.a,{variant:"outlined",className:n.formControl,children:[Object(g.jsx)(f.a,{id:"Sensor Selectors",children:"Sensors"}),Object(g.jsx)(h.a,{labelId:"Sensor Selectors",value:o,onChange:function(e){l(e.target.value)},label:"Sensor",children:t.map((function(e){return Object(g.jsx)(O.a,{value:e.value,children:e.key},e.key)}))})]})})}var v=a(28),_=a(17),D=a(324),C=a(39),S=a(277),k=a(317),E=a(120),N=(a(264),a(265),a(266),a(323)),T=(a(267),function(e){return s.a.createPortal(Object(g.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),w=(a(268),function(e){var t=Object(g.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(g.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(g.jsx)("h2",{children:e.header})}),Object(g.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(g.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(g.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))}),H=function(e){return Object(g.jsxs)(r.a.Fragment,{children:[e.show&&Object(g.jsx)(T,{onClick:e.onCancel}),Object(g.jsx)(N.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(g.jsx)(w,Object(_.a)({},e))})]})},P=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},buttonHover:{"&:hover":{cursor:"pointer",backgroundColor:"#86af49"},"&:active":{backgroundColor:"#86af49"}}}})),A=function(e,t){switch(t.type){case"DECISION":var a=t.tempDate;return 0===a.days?{range:Object(_.a)({},e.range),isCustomDate:!0}:{range:{startDate:Object(D.a)(new Date,Object(v.a)({},a.type,[a.days])),endDate:new Date,key:"selection"},isCustomDate:e.isCustomDate};case"CLOSE":return{range:Object(_.a)({},e.range),isCustomDate:t.isCustomDate};case"SELECT_CUSTOM_DATE":return{range:t.range,isCustomDate:e.isCustomDate};default:return e}};function R(e){var t=e.dateSelector,a=e.display,c=e.dateChangeHandler,s=P(),o=Object(n.useReducer)(A,{range:{startDate:new Date,endDate:Object(C.default)(new Date,2),key:"selection"},isCustomDate:!1}),l=Object(i.a)(o,2),d=l[0],u=l[1],j=Object(n.useCallback)((function(e){u({type:"SELECT_CUSTOM_DATE",range:e.selection})}),[]),b=function(){u({type:"CLOSE",isCustomDate:!1})},m=function(e){u({type:"DECISION",tempDate:t.find((function(t){return t.key===e.target.innerText.toLowerCase()}))})},f=d.range;return Object(n.useEffect)((function(){c(f)}),[c,f]),d.isCustomDate?Object(g.jsx)(H,{show:d.isCustomDate,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",onCancle:b,footer:Object(g.jsx)(S.a,{onClick:b,children:"CLOSE"}),children:Object(g.jsx)(E.DateRangePicker,{ranges:[d.range],onChange:j,showSelectionPreview:!0,moveRangeOnFirstSelection:!1,direction:"horizontal"})}):a?Object(g.jsx)(r.a.Fragment,{}):Object(g.jsx)("div",{className:s.root,children:Object(g.jsx)(k.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:t.map((function(e){return Object(g.jsx)(S.a,{className:s.buttonHover,onClick:m,children:e.key},e.key)}))})})}var F=100,I=50,L=600-F-20,M=760-I-10;var G=function(e){var t=e.graphData,a=t.outputData,c=t.selectedSensors,s=t.dateRange,i=c,l=["#d53e4f","#3288bd","#66c2a5","#f46d43"],d={};i.forEach((function(e,t){d[e]=l[t]}));var u=Object(n.useRef)();return Object(n.useEffect)((function(){var e=Object(o.i)(u.current);console.log("outputData: ",a);var t=Object(o.j)().keys(i).order(o.k)(a),n=[0,Object(o.d)(t,(function(e){return Object(o.d)(e,(function(e){return e[1]}))}))],r=Object(o.g)().domain(a.map((function(e){return new Date(e.Date).getTime()}))).range([0,M]),c=Object(o.h)().domain(n).range([L,0]);e.selectAll(".layer").data(t).join("g").attr("class","layer").attr("fill",(function(e){return d[e.key]})).selectAll("rect").data((function(e){return e})).join("rect").attr("x",(function(e){return r(new Date(e.data.Date).getTime())})).attr("width",r.bandwidth()).attr("y",(function(e){return c(e[1])})).attr("height",(function(e){return c(e[0])-c(e[1])})).attr("transform","translate(".concat(I,",").concat(F,")")).on("mouseover",(function(){s.style("display",null)})).on("mouseout",(function(){s.style("display","none")})).on("mousemove",(function(t){var a=Object(o.f)(t,e.node)[0],n=Object(o.f)(t,e.node)[1];s.attr("transform","translate( ".concat(a-10,", ").concat(n-10,")")),s.select("text").text((function(e){return e}))}));var s=e.append("g").attr("class","tooltip").style("display","none");s.append("text").attr("dy","1.2em").style("text-anchor","middle").attr("font-size","15px").attr("font-weight","bold"),e.append("text").attr("class","x label").attr("text-anchor","end").attr("x",M/2).attr("y",620).text("Date Month"),e.append("text").attr("class","y label").attr("text-anchor","end").attr("y",M/2-350).attr("x",-L/2+50).attr("dy",".75em").attr("transform","rotate(-90)").text("Sensor Data");var l=Object(o.a)(r).scale(r).tickFormat(Object(o.l)("%d %b")).tickValues(r.domain().filter((function(e,t){return!(t%400)})));e.select(".x-axis").attr("transform","translate(0, ".concat(L,")")).call(l);var j=Object(o.b)(c);e.select(".y-axis").call(j);var b=e.append("g").attr("class","legend").attr("transform","translate("+(M-90)+", 20)");b.selectAll("text").data(i).enter().append("text").text((function(e){return e})).attr("x",18).attr("y",(function(e,t){return 18*t})).attr("text-anchor","start").attr("alignment-baseline","hanging"),b.selectAll("rect").data(i).enter().append("rect").attr("x",0).attr("y",(function(e,t){return 18*t})).attr("width",12).attr("height",12).attr("fill",(function(e,t){return d[e]}))}),[a,i,d,s]),Object(g.jsx)(r.a.Fragment,{children:Object(g.jsx)("svg",{ref:u,width:760,height:600,children:Object(g.jsxs)("g",{transform:"translate(".concat(I,",").concat(F,")"),children:[Object(g.jsx)("g",{className:"x-axis"}),Object(g.jsx)("g",{className:"y-axis"})]})})})},V=[{key:"Temperature",value:["Temperature_2","Temperature_137522"]},{key:"Co2 Levels",value:["CarbonDioxide_2","CarbonDioxide_137522"]},{key:"Humidity",value:["Humitidy_2","Humitidy_137522"]},{key:"VPD",value:["Vpd_2","Vpd_137522"]},{key:"All",value:["temperature","co2","humitidy","vpd"]}],U=[{key:"12 hours",days:12,type:"hours"},{key:"1 day",days:1,type:"days"},{key:"7 days",days:7,type:"days"},{key:"14 days",days:14,type:"days"},{key:"30 days",days:30,type:"days"},{key:"custome date",days:0,type:"custom"}],B=a(321),J=a(318),W=a(319),z=a(320),q=a.p+"static/media/logo.872fc8ea.png",K=Object(m.a)((function(){return{header:{backgroundColor:"white",width:"100%",position:"inherit"},logoStyle:{maxWidth:"170px"}}}));function Q(e){var t=e.display,a=K(),n=a.header,c=a.logoStyle,s=Object(g.jsx)(W.a,{variant:"h6",component:"h1",children:Object(g.jsx)("img",{src:q,alt:"logo",className:c})});return t?Object(g.jsx)("header",{children:Object(g.jsx)(z.a,{className:n,children:Object(g.jsx)(J.a,{children:s})})}):Object(g.jsx)(r.a.Fragment,{})}a(269);var X=function(e){return e.display?Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)("div",{className:"report-body",children:[Object(g.jsxs)("div",{className:"report-details",children:[Object(g.jsxs)("span",{children:["Report created by: ",Object(g.jsx)("span",{className:"report-creater",children:" Talha "})]}),Object(g.jsx)("span",{children:"Report Date: Date"})]}),Object(g.jsxs)("div",{className:"main-text",children:[Object(g.jsx)("span",{className:"company-name",children:"Scimetic | Epic Solutions"}),Object(g.jsx)("span",{className:"greenhouse-name",children:"Test Greenhouse"}),Object(g.jsx)("span",{children:"Genealogy: test Genealogy"}),Object(g.jsxs)("span",{children:["Date of Plating: ",(new Date).toDateString()]})]}),Object(g.jsx)("span",{className:"d3-chart",children:e.children}),Object(g.jsx)("p",{children:"More text can be added"})]})}):Object(g.jsxs)(r.a.Fragment,{children:[" ",e.children]})},Y=a(121),Z=a(122),$=a.n(Z),ee=function(e){return e.display?Object(g.jsx)(r.a.Fragment,{children:Object(g.jsx)(S.a,{variant:"outlined",color:"primary","aria-label":"text primary button",onClick:function(){var e=document.getElementById("divToPrint");$.a.toPng(e).then((function(e){var t=new Y.a;t.addImage(e,"PNG",0,0),t.save("download.pdf")})).catch((function(e){console.error("oops, something went wrong!",e)}))},children:"Print"})}):Object(g.jsx)(r.a.Fragment,{})},te=(a(270),function(e){return Object(g.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(g.jsx)("div",{className:"lds-dual-ring"})})}),ae=function(e,t){switch(t.type){case"DATE_CHANGE":return Object(_.a)(Object(_.a)({},e),{},{dateRange:t.dateRange});case"SENSOR_CHANGE":return Object(_.a)(Object(_.a)({},e),{},{selectedSensors:t.sensors});case"SET_FORM_DATA":return Object(_.a)(Object(_.a)({},e),{},{data:t.data});case"UPDATE_OUTPUT":return Object(_.a)(Object(_.a)({},e),{},{outputData:t.output});default:return e}},ne=(a(271),function(e){return Object(g.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),re=(a(272),function(){var e=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Object(o.c)(b,(function(e){return e.Date=new Date(e.Date),e.Temperature_2=+[e.Temperature_2],e.Temperature_137522=+[e.Temperature_137522],e.Humitidy_137522=+[e.Humitidy_137522],e.Humitidy_2=+[e.Humitidy_2],e.CarbonDioxide_137522=+[e.CarbonDioxide_137522],e.CarbonDioxide_2=+[e.CarbonDioxide_2],e.Vpd_2=u(e.Temperature_2,e.Humitidy_2),e.Vpd_137522=u(e.Temperature_137522,e.Humitidy_137522),e.avg_temp=(e.Temperature_137522+e.Temperature_2)/2,e.avg_co2=(e.CarbonDioxide_137522+e.CarbonDioxide_2)/2,e.avg_humitidy=(e.Humitidy_137522+e.Humitidy_2)/2,e.avg_vpd=(e.Vpd_137522+e.Vpd_2)/2,e})).then((function(e){var t=Object(o.e)(e,(function(e){return e.avg_temp})),a=Object(o.d)(e,(function(e){return e.avg_temp})),n=Object(o.e)(e,(function(e){return e.avg_co2})),c=Object(o.d)(e,(function(e){return e.avg_co2})),s=Object(o.e)(e,(function(e){return e.avg_humitidy})),i=Object(o.d)(e,(function(e){return e.avg_humitidy})),l=Object(o.e)(e,(function(e){return e.avg_vpd})),d=Object(o.d)(e,(function(e){return e.avg_vpd}));e.forEach((function(e,r){e.temperature=j(e.avg_temp,t,a),e.co2=j(e.avg_co2,n,c),e.humitidy=j(e.avg_humitidy,s,i),e.vpd=j(e.avg_vpd,l,d)})),r(e.slice(0,100))}))}),[]),a}(),t=r.a.useState(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],l=function(e){var t=Object(n.useReducer)(ae,{data:e,outputData:[],selectedSensors:null,dateRange:null}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useCallback)((function(e,t,a){var n=[];JSON.parse(JSON.stringify(e)).forEach((function(e){if(d()(e.Date).isBetween(a.startDate,a.endDate)){var r={};t.forEach((function(t){r.Date=e.Date,t in e&&(r[t]=e[t])})),n.push(r)}})),c({type:"UPDATE_OUTPUT",output:n})}),[]),o=Object(n.useCallback)((function(e){c({type:"DATE_CHANGE",dateRange:e})}),[]),l=Object(n.useCallback)((function(e){c({type:"SENSOR_CHANGE",sensors:e})}),[]),u=Object(n.useCallback)((function(e){c({type:"SET_FORM_DATA",data:e})}),[]),j=r.data,b=r.selectedSensors,m=r.dateRange;return Object(n.useEffect)((function(){j&&s(j,b,m)}),[j,b,m,s]),[r,o,l,u]}(e),m=Object(i.a)(l,4),f=m[0],O=m[1],p=m[2],h=m[3];if(r.a.useEffect((function(){e&&h(e)}),[e,h]),!e)return Object(g.jsx)("div",{className:"center",children:Object(g.jsx)(te,{})});var y=f.outputData,v=f.selectedSensors,_=f.dateRange;return console.log("APP =>> outputData, selectedSensors, dateRange: ",y,v,_),Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)(B.a,{container:!0,children:[Object(g.jsx)(B.a,{item:!0,md:1,style:{marginLeft:"10%"}}),Object(g.jsx)("div",{children:Object(g.jsxs)(B.a,{item:!0,md:9,style:{maxWidth:"100%"},id:"divToPrint",children:[Object(g.jsx)(Q,{display:c}),Object(g.jsx)(R,{dateChangeHandler:O,dateSelector:U,display:c}),void 0===y||0===y.length?Object(g.jsx)("div",{className:"center",children:Object(g.jsx)(ne,{children:Object(g.jsx)("h2",{children:"NO data found, Select different date range!"})})}):Object(g.jsxs)(X,{display:c,children:[Object(g.jsx)(G,{graphData:f}),Object(g.jsx)("h3",{children:" Graph Name & description  "})]})]})}),Object(g.jsxs)(B.a,{item:!0,md:2,style:{marginLeft:"4%"},children:[Object(g.jsx)(x,{dataSetSelector:V,sensorChangeHandler:p}),Object(g.jsx)(S.a,{variant:"outlined",color:"primary",onClick:function(){s(!c)},children:c?"Back":"View PDF"}),Object(g.jsx)(ee,{display:c})]})]})})}),ce=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,700)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(re,{})}),document.getElementById("root")),ce()}},[[273,1,3]]]);
//# sourceMappingURL=main.fb517900.chunk.js.map